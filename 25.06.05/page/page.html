<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>새 페이지 생성</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/page/new.css">

</head>

<body>
    <div class="app-header">
        <div class="header">
            <div class="header-logo">
                <a href="/dashboard/dashboard.html">
                    <img src="/images/logo_noback(withoutLettter).png" alt="로고이미지" />
                    <img src="/images/logo_title.png" class="logo-title" alt="로고타이틀" />
                </a>
            </div>
            <div class="memu">
                <a href="/board/main.html">
                    <img src="/images/header/board.png" alt="게시판" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/chat/main.html">
                    <img src="/images/header/chat.png" alt="메세지" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/calender/calender.html">
                    <img src="/images/header/calendar.png" alt="캘린더" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/project/main.html">
                    <img src="/images/header/project.png" alt="프로젝트" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/page/pageMain.html">
                    <img src="/images/header/page.png" alt="페이지" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/drive/drive.html">
                    <img src="/images/header/drive.png" alt="드라이브" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <a href="/admin/profile.html">
                    <img src="/images/header/settings.png" alt="설정" class="memu-icon" />
                </a>
                <div class="vertical-divider"></div>
                <img src="/images/off.png" alt="로그아웃" class="logout" />
                <div class="vertical-divider"></div>
            </div>
            <span class="status">ONLINE <span>●</span></span>
            <img src="/images/profile1.png" alt="프로필이미지" />
            <span class="admin">김팀장<br>Admin</span>
        </div>
    </div>

    <div class="main-content-wrapper">

        <div class="notion-style-sidebar">
            <div class="notion-style-sidebar-header">
                <h2>내 페이지 <span>(5)</span></h2>
                <div class="search-box">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="검색하기">
                </div>
            </div>

            <div class="sidebar-section">
                <div class="section-title" data-target="recentPages">
                    <span>최근 페이지 (1)</span>
                    <i class="fa-solid fa-angle-down"></i>
                </div>
                <ul class="page-list collapsible-content" id="recentPages">
                    <li><i class="fa-solid fa-file icon"></i> 새 페이지 1</li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="section-title" data-target="pageList">
                    <span>페이지 목록 (5)</span>
                    <i class="fa-solid fa-angle-down"></i>
                </div>
                <ul class="page-list collapsible-content" id="pageList">
                    <li><i class="fa-solid fa-file icon"></i> 새 페이지 1</li>
                    <li><i class="fa-solid fa-file icon"></i> 새 페이지 5</li>
                    <li><i class="fa-solid fa-file icon"></i> 새 페이지 2</li>
                    <li class="active"><i class="fa-solid fa-file icon"></i> 새 페이지 4</li>
                    <li><i class="fa-solid fa-file icon"></i> 새 페이지 3</li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="section-title" data-target="sharedPages">
                    <span>공유 페이지 (1)</span>
                    <i class="fa-solid fa-angle-down"></i>
                </div>
                <ul class="page-list collapsible-content" id="sharedPages">
                    <li><i class="fa-solid fa-file icon"></i> 공유 페이지 1</li>
                </ul>
            </div>

            <div class="sidebar-section">
                <ul class="page-list">
                    <li><i class="fa-solid fa-trash-can icon"></i> 휴지통</li>
                </ul>
            </div>

            <div class="create-page-btn-wrapper">
                <button class="create-page-btn">
                    <i class="fa-solid fa-plus"></i> 새 페이지 생성
                </button>
            </div>
        </div>

        <div class="main-editor-area">
            <div class="main-header">
                <button class="share-btn" id="shareBtn">공유하기</button>
            </div>

            <div class="page-title-section">
                <div class="page-meta">
                    <i class="fa-solid fa-earth-americas"></i> 비어 있음
                </div>
                <input type="text" class="page-title-input" placeholder="텍스트 제목 입력" value="텍스트 제목 입력">
                <div class="add-property">
                    <i class="fa-solid fa-plus"></i> 속성 추가
                </div>
            </div>

            <div class="content-editor">
                <textarea placeholder="텍스트 내용 입력"></textarea>
            </div>

            <div class="share-modal" id="shareModal">
                <h3>공유하기</h3>
                <div class="share-input-group">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="이름으로 구분된 이메일 또는 그룹">
                </div>
                <ul class="share-permission-list">
                    <li class="share-permission-item">
                        <div class="share-user-info">
                            <img src="https://via.placeholder.com/30" alt="User Avatar">
                            <span>user@gmail.com</span>
                        </div>
                        <div class="share-permission-dropdown">
                            <button id="permissionDropdownBtn">
                                전체 허용 <i class="fa-solid fa-angle-down"></i>
                            </button>
                            <ul class="share-permission-options" id="permissionOptions">
                                <li>전체 허용</li>
                                <li>편집 허용</li>
                                <li>댓글 허용</li>
                                <li>읽기 허용</li>
                                <li>사용 권한 없음</li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="app-footer">
        version 0.0.1 | License | More Themes | Documentation | Support
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Share Button & Modal Logic
            const shareBtn = document.getElementById('shareBtn');
            const shareModal = document.getElementById('shareModal');
            const permissionDropdownBtn = document.getElementById('permissionDropdownBtn');
            const permissionOptions = document.getElementById('permissionOptions');

            if (shareBtn && shareModal) { // Check if elements exist
                shareBtn.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent document click from immediately closing
                    shareModal.classList.toggle('show');
                    // Hide permission options if share modal closes
                    if (!shareModal.classList.contains('show')) {
                        permissionOptions.classList.remove('show');
                    }
                });
            }


            // Toggle permission options dropdown
            if (permissionDropdownBtn && permissionOptions) {
                permissionDropdownBtn.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from bubbling to document and closing modal
                    permissionOptions.classList.toggle('show');
                });
            }


            // Close share modal and permission options when clicking outside
            document.addEventListener('click', (event) => {
                if (shareModal && !shareModal.contains(event.target) && event.target !== shareBtn) {
                    shareModal.classList.remove('show');
                }
                if (permissionOptions && !permissionOptions.contains(event.target) && event.target !== permissionDropdownBtn) {
                    permissionOptions.classList.remove('show');
                }
            });

            // Select permission option
            if (permissionOptions) {
                permissionOptions.querySelectorAll('li').forEach(option => {
                    option.addEventListener('click', () => {
                        if (permissionDropdownBtn) {
                            // Safely update button text, handling text nodes
                            permissionDropdownBtn.childNodes[0].nodeValue = option.textContent.trim() + ' ';
                        }
                        permissionOptions.classList.remove('show'); // Hide dropdown
                    });
                });
            }

            // Collapsible Sidebar Sections (for Notion-style sidebar)
            document.querySelectorAll('.notion-style-sidebar .section-title').forEach(title => {
                title.addEventListener('click', () => {
                    const targetId = title.dataset.target;
                    const content = document.getElementById(targetId);
                    if (content) {
                        content.classList.toggle('collapsed');
                        title.classList.toggle('collapsed');
                    }
                });
            });
        });
    </script>
</body>

</html>